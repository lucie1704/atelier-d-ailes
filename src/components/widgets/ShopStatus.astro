---
import { OPEN_DAYS, OPEN_HOUR, CLOSE_HOUR } from '~/constants/shop';
import Tag from '~/components/ui/Tag.astro'

const isShopOpen = (): boolean => {
  const now = new Date();
  const day = now.getDay();
  const time = now.getHours() + now.getMinutes() / 60;

  return OPEN_DAYS.includes(day) && time >= OPEN_HOUR && time < CLOSE_HOUR;
};

const open = isShopOpen();
---

<Tag variant={open ? 'success' : 'danger'}>
  {open ? 'Ouvert actuellement' : 'Ferm√© actuellement'}
</Tag>
